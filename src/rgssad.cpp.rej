--- src/rgssad.cpp
+++ src/rgssad.cpp
@@ -297,8 +297,6 @@ processDirectories(RGSS_archiveData *data, BoostSet<std::string> &topLevel,
 
 		if (slash)
 			nameBuf[i] = '/';
-
-		break;
 	}
 
 	/* Check for more entries */
@@ -333,16 +331,14 @@ verifyHeader(PHYSFS_Io *io, char version)
 }
 
 static void*
-RGSS_openArchive(PHYSFS_Io *io, const char *, int forWrite, int *claimed)
+RGSS_openArchive(PHYSFS_Io *io, const char *, int forWrite)
 {
 	if (forWrite)
-		return NULL;
+		return 0;
 
 	/* Version 1 */
 	if (!verifyHeader(io, 1))
-		return NULL;
-	else
-		*claimed = 1;
+		return 0;
 
 	RGSS_archiveData *data = new RGSS_archiveData;
 	data->archiveIo = io;
@@ -393,9 +389,9 @@ RGSS_openArchive(PHYSFS_Io *io, const char *, int forWrite, int *claimed)
 	return data;
 }
 
-static PHYSFS_EnumerateCallbackResult
+static void
 RGSS_enumerateFiles(void *opaque, const char *dirname,
-                    PHYSFS_EnumerateCallback cb,
+                    PHYSFS_EnumFilesCallback cb,
                     const char *origdir, void *callbackdata)
 {
 	RGSS_archiveData *data = static_cast<RGSS_archiveData*>(opaque);
@@ -403,15 +399,13 @@ RGSS_enumerateFiles(void *opaque, const char *dirname,
 	std::string _dirname(dirname);
 
 	if (!data->dirHash.contains(_dirname))
-		return PHYSFS_ENUM_STOP;
+		return;
 
 	const BoostSet<std::string> &entries = data->dirHash[_dirname];
 
 	BoostSet<std::string>::const_iterator iter;
 	for (iter = entries.cbegin(); iter != entries.cend(); ++iter)
 		cb(callbackdata, origdir, iter->c_str());
-
-	return PHYSFS_ENUM_OK;
 }
 
 static PHYSFS_Io*
@@ -542,21 +536,19 @@ readUint32AndXor(PHYSFS_Io *io, uint32_t &result, uint32_t key)
 }
 
 static void*
-RGSS3_openArchive(PHYSFS_Io *io, const char *, int forWrite, int *claimed)
+RGSS3_openArchive(PHYSFS_Io *io, const char *, int forWrite)
 {
 	if (forWrite)
-		return NULL;
+		return 0;
 
 	/* Version 3 */
 	if (!verifyHeader(io, 3))
-		return NULL;
-	else
-		*claimed = 1;
+		return 0;
 
 	uint32_t baseMagic;
 
 	if (!readUint32(io, baseMagic))
-		return NULL;
+		return 0;
 
 	baseMagic = (baseMagic * 9) + 3;
 
@@ -613,7 +605,7 @@ RGSS3_openArchive(PHYSFS_Io *io, const char *, int forWrite, int *claimed)
 
 	error:
 		delete data;
-		return NULL;
+		return 0;
 	}
 
 	return data;
